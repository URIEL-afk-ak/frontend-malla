(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{6144:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(7876),a=n(4232),i=n(3411),o=n(6183),d=n(1064),l=n(8246),s=n(9493),c=n(3858);let h=["#22c55e","#ffc107","#adb5bd"],f=["aprobada","regular","pendiente"],p=e=>{let{cx:t,cy:n,midAngle:a,innerRadius:i,outerRadius:o,percent:d}=e,l=Math.PI/180,s=i+(o-i)*.5,c=t+s*Math.cos(-a*l),h=n+s*Math.sin(-a*l);return d>0?(0,r.jsx)("text",{x:c,y:h,fill:"#23272f",textAnchor:"middle",dominantBaseline:"central",style:{fontWeight:"bold",fontSize:"1.1em"},children:"".concat(Math.round(100*d),"%")}):null};function x(e){let{resumen:t}=e;f.reduce((e,n)=>e+(t[n]||0),0);let n=f.map((e,n)=>({name:e.charAt(0).toUpperCase()+e.slice(1),value:t[e]||0}));return(0,r.jsx)("div",{style:{width:"100%",height:220,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(i.u,{width:220,height:220,children:(0,r.jsxs)(o.r,{children:[(0,r.jsx)(d.F,{data:n,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:85,innerRadius:45,stroke:"#fff",strokeWidth:3,style:{filter:"drop-shadow(0 2px 8px #23272f22)"},label:p,labelLine:!1,children:n.map((e,t)=>(0,r.jsx)(l.f,{fill:h[t]},"cell-".concat(t)))}),(0,r.jsx)(s.m,{formatter:(e,t)=>["".concat(e," materias"),t],wrapperStyle:{fontWeight:600,fontSize:"1em",color:"#23272f",background:"#fff",borderRadius:8,boxShadow:"0 2px 8px #23272f22"}}),(0,r.jsx)(c.s,{formatter:e=>(0,r.jsx)("span",{style:{fontWeight:600,fontSize:"0.98em",color:"#23272f"},children:e}),iconSize:16})]})})})}function u(){let[e,t]=(0,a.useState)([]),[n,i]=(0,a.useState)({}),[o,d]=(0,a.useState)(null),[l,s]=(0,a.useState)(0),[c,h]=(0,a.useState)({aprobada:0,regular:0,pendiente:0}),[f,p]=(0,a.useState)(""),[u,g]=(0,a.useState)(null),[b,m]=(0,a.useState)(""),[y,j]=(0,a.useState)("");return(0,a.useEffect)(()=>{fetch("".concat("http://localhost:5000","/api/malla")).then(e=>e.json()).then(e=>{let n=Array.isArray(e.data)?e.data.filter(e=>"aprobada"===e.estado):[];t(n),s(n.filter(e=>e.electiva).reduce((e,t)=>e+(t.creditos||0),0))}),fetch("".concat("http://localhost:5000","/api/notas/promedio")).then(e=>e.json()).then(e=>d(e.data.promedio)),fetch("".concat("http://localhost:5000","/api/estadisticas/resumen")).then(e=>e.json()).then(e=>{let t={aprobada:0,regular:0,pendiente:0};Object.values(e.data).forEach(e=>{t.aprobada+=e.aprobada||0,t.regular+=e.regular||0,t.pendiente+=e.pendiente||0}),h(t)}),fetch("".concat("http://localhost:5000","/api/notas")).then(e=>e.json()).then(e=>{if("success"===e.status&&Array.isArray(e.data)){let t={};e.data.forEach(e=>{t[e.id]=null!==e.nota?e.nota:""}),i(t)}})},[]),(0,r.jsxs)("main",{style:{width:"100vw",minHeight:"100vh",maxWidth:"100vw",margin:"0",padding:"4em 0 0 0",background:"#e5e7eb",boxSizing:"border-box",display:"flex",flexDirection:"column",alignItems:"center",overflowX:"hidden"},children:[(0,r.jsx)("h1",{style:{fontSize:"1.8em",fontWeight:700,color:"#2563eb",marginBottom:"1.2em",textAlign:"center"},children:"Notas y Estad\xedsticas"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"2em",alignItems:"flex-start"},children:[(0,r.jsxs)("div",{style:{flex:2,background:"rgba(255,255,255,0.85)",borderRadius:"12px",boxShadow:"0 2px 12px 0 #2563eb11",padding:"1em 0.7em",minWidth:320},children:[f&&(0,r.jsx)("div",{style:{background:"linear-gradient(90deg,#22c55e 60%,#38bdf8 100%)",color:"#fff",fontWeight:600,borderRadius:"8px",padding:"0.5em",marginBottom:"0.7em",textAlign:"center",fontSize:"0.98em",boxShadow:"0 2px 8px #22c55e44"},children:f}),(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0 0.3em",fontSize:"0.98em",fontFamily:"Inter, sans-serif"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{style:{background:"linear-gradient(90deg,#2563eb 60%,#38bdf8 100%)",color:"#fff",borderRadius:"8px"},children:[(0,r.jsx)("th",{style:{padding:"0.5em",borderTopLeftRadius:"8px"},children:"Materia"}),(0,r.jsx)("th",{children:"Tipo"}),(0,r.jsx)("th",{children:"Cr\xe9ditos"}),(0,r.jsx)("th",{children:"Nota"}),(0,r.jsx)("th",{style:{borderTopRightRadius:"8px",textAlign:"center"},children:"Acci\xf3n"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{style:{background:e.electiva?"linear-gradient(90deg,#f3e8ff 60%,#e0f2fe 100%)":"#fff",boxShadow:"0 2px 8px #2563eb11",borderRadius:"6px",transition:"background 0.18s"},onMouseEnter:e=>e.currentTarget.style.background="linear-gradient(90deg,#e0f2fe 60%,#bae6fd 100%)",onMouseLeave:t=>t.currentTarget.style.background=e.electiva?"linear-gradient(90deg,#f3e8ff 60%,#e0f2fe 100%)":"#fff",children:[(0,r.jsx)("td",{style:{padding:"0.5em 0.4em",fontWeight:600,color:"#111",fontSize:"0.98em"},children:e.nombre}),(0,r.jsx)("td",{style:{fontWeight:500,color:"#111"},children:e.electiva?"Electiva":"Obligatoria"}),(0,r.jsx)("td",{style:{fontWeight:500,color:"#111"},children:e.electiva&&e.creditos||"-"}),(0,r.jsx)("td",{children:u===e.id?(0,r.jsx)("input",{type:"text",inputMode:"decimal",pattern:"[0-9]+([\\\\.,][0-9]*)?",min:6,max:10,value:b,onChange:e=>{let t=e.target.value.replace(",",".");if(/^\d{0,2}(\.\d{0,2})?$/.test(t)||""===t){let e=Number(t);""===t||e>=6&&e<=10?(m(t),j("")):(m(t),j("Solo se permiten valores entre 6 y 10"))}},style:{width:"54px",height:"32px",fontSize:"1.08em",borderRadius:"6px",border:"2px solid #23272f",textAlign:"center",color:"#111"}}):(0,r.jsx)("span",{style:{color:"#111"},children:void 0!==n[e.id]?n[e.id]:"-"})}),(0,r.jsx)("td",{children:u===e.id?(0,r.jsx)("button",{onClick:async()=>{if(""===b||isNaN(b)||6>Number(b)||Number(b)>10)return void j("La nota debe ser un n\xfamero entre 6 y 10");j(""),await fetch("".concat("http://localhost:5000","/api/notas"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({materiaId:e.id,valor:Number(b)})}),fetch("".concat("http://localhost:5000","/api/notas")).then(e=>e.json()).then(t=>{if("success"===t.status&&Array.isArray(t.data)){let n=t.data.find(t=>t.id===e.id);i(t=>{var r;return{...t,[e.id]:null!=(r=null==n?void 0:n.nota)?r:""}})}}),g(null)},style:{background:"#22c55e",color:"#fff",border:"none",borderRadius:"6px",padding:"0.3em 0.9em",fontWeight:600,cursor:"pointer"},children:"Guardar"}):(0,r.jsx)("button",{onClick:()=>{g(e.id),m(void 0!==n[e.id]?String(n[e.id]):""),j("")},style:{background:"#2563eb",color:"#fff",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:600,cursor:"pointer",boxShadow:"0 1px 4px #2563eb22",transition:"background 0.18s, transform 0.18s"},onMouseEnter:e=>e.currentTarget.style.background="#1d4ed8",onMouseLeave:e=>e.currentTarget.style.background="#2563eb",title:"Editar nota",children:(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M4 13.5V16h2.5l7.06-7.06-2.5-2.5L4 13.5zm12.71-7.29a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.76 3.76 1.83-1.83z",fill:"#fff"})})})})]},e.id))})]})]}),(0,r.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",gap:"1.2em",background:"rgba(255,255,255,0.7)",borderRadius:"12px",boxShadow:"0 2px 12px 0 #2563eb11",padding:"1em 0.7em",minWidth:220,backdropFilter:"blur(6px)"},children:[(0,r.jsx)(x,{resumen:c}),(0,r.jsxs)("div",{style:{width:"100%",marginTop:"0.5em",display:"flex",flexDirection:"column",gap:"0.7em"},children:[(0,r.jsxs)("div",{style:{background:"#f3f4f6",borderRadius:"8px",padding:"0.7em 0.7em",fontWeight:600,fontSize:"1em",color:"#23272f",boxShadow:"0 2px 8px #23272f11",textAlign:"center"},children:["Promedio general: ",(0,r.jsx)("span",{style:{fontWeight:700,fontSize:"1.08em"},children:o?o.toFixed(2):"-"})]}),(0,r.jsxs)("div",{style:{background:"#f3f4f6",borderRadius:"8px",padding:"0.7em 0.7em",fontWeight:600,fontSize:"1em",color:"#23272f",boxShadow:"0 2px 8px #23272f11",textAlign:"center"},children:["Cr\xe9ditos electivas aprobadas: ",(0,r.jsx)("span",{style:{fontWeight:700,fontSize:"1.08em"},children:l})]})]})]})]}),(0,r.jsx)("div",{style:{textAlign:"center",marginTop:"1.5em"},children:(0,r.jsx)("button",{onClick:()=>window.location.href="/",style:{background:"#2563eb",color:"#fff",border:"none",borderRadius:"6px",padding:"0.6em 1.2em",fontWeight:600,cursor:"pointer",boxShadow:"0 2px 8px #2563eb22",transition:"background 0.18s"},children:"Volver al inicio"})})]})}},6818:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/notas",function(){return n(6144)}])}},e=>{e.O(0,[912,221,636,593,792],()=>e(e.s=6818)),_N_E=e.O()}]);